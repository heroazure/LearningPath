<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <title></title>
    <style>
        /*定义方型转化为圆型的动画round*/
        @-webkit-keyframes round {
            from {
                -webkit-transform: rotate(36deg);
                -moz-transform: rotate(36deg);
                -ms-transform: rotate(36deg);
                -o-transform: rotate(36deg);
                transform: rotate(36deg);
                -webkit-border-radius: 2px;
                -moz-border-radius: 2px;
                border-radius: 2px;
            }
            10% {
                -webkit-transform: rotate(72deg);
                -moz-transform: rotate(72deg);
                -ms-transform: rotate(72deg);
                -o-transform: rotate(72deg);
                transform: rotate(72deg);
                -webkit-border-radius: 4px;
                -moz-border-radius: 4px;
                border-radius: 4px;
            }
            20% {
                -webkit-transform: rotate(108deg);
                -moz-transform: rotate(108deg);
                -ms-transform: rotate(108deg);
                -o-transform: rotate(108deg);
                transform: rotate(108deg);
                -webkit-border-radius: 6px;
                -moz-border-radius: 6px;
                border-radius: 6px;
            }
            30% {
                -webkit-transform: rotate(144deg);
                -moz-transform: rotate(144deg);
                -ms-transform: rotate(144deg);
                -o-transform: rotate(144deg);
                transform: rotate(144deg);
                -webkit-border-radius: 9px;
                -moz-border-radius: 9px;
                border-radius: 9px;
            }
            40% {
                -webkit-transform: rotate(180deg);
                -moz-transform: rotate(180deg);
                -ms-transform: rotate(180deg);
                -o-transform: rotate(180deg);
                transform: rotate(180deg);
                -webkit-border-radius: 12px;
                -moz-border-radius: 12px;
                border-radius: 12px;
            }
            50% {
                -webkit-transform: rotate(216deg);
                -moz-transform: rotate(216deg);
                -ms-transform: rotate(216deg);
                -o-transform: rotate(216deg);
                transform: rotate(216deg);
                -webkit-border-radius: 14px;
                -moz-border-radius: 14px;
                border-radius: 14px;
            }
            60% {
                -webkit-transform: rotate(252deg);
                -moz-transform: rotate(252deg);
                -ms-transform: rotate(252deg);
                -o-transform: rotate(252deg);
                transform: rotate(252deg);
                -webkit-border-radius: 16px;
                -moz-border-radius: 16px;
                border-radius: 16px;
            }
            70% {
                -webkit-transform: rotate(288deg);
                -moz-transform: rotate(288deg);
                -ms-transform: rotate(288deg);
                -o-transform: rotate(288deg);
                transform: rotate(288deg);
                -webkit-border-radius: 19px;
                -moz-border-radius: 19px;
                border-radius: 19px;
            }
            80% {

                -webkit-transform: rotate(324deg);
                -moz-transform: rotate(324deg);
                -ms-transform: rotate(324deg);
                -o-transform: rotate(324deg);
                transform: rotate(324deg);
                -webkit-border-radius: 22px;
                -moz-border-radius: 22px;
                border-radius: 22px;
            }
            to {
                -webkit-transform: rotate(360deg);
                -moz-transform: rotate(360deg);
                -ms-transform: rotate(360deg);
                -o-transform: rotate(360deg);
                transform: rotate(360deg);
                -webkit-border-radius: 25px;
                -moz-border-radius: 25px;
                border-radius: 25px;
            }
        }

        @keyframes round {
            from {
                -webkit-transform: rotate(36deg);
                -moz-transform: rotate(36deg);
                -ms-transform: rotate(36deg);
                -o-transform: rotate(36deg);
                transform: rotate(36deg);
                -webkit-border-radius: 2px;
                -moz-border-radius: 2px;
                border-radius: 2px;
            }
            10% {
                -webkit-transform: rotate(72deg);
                -moz-transform: rotate(72deg);
                -ms-transform: rotate(72deg);
                -o-transform: rotate(72deg);
                transform: rotate(72deg);
                -webkit-border-radius: 4px;
                -moz-border-radius: 4px;
                border-radius: 4px;
            }
            20% {
                -webkit-transform: rotate(108deg);
                -moz-transform: rotate(108deg);
                -ms-transform: rotate(108deg);
                -o-transform: rotate(108deg);
                transform: rotate(108deg);
                -webkit-border-radius: 6px;
                -moz-border-radius: 6px;
                border-radius: 6px;
            }
            30% {
                -webkit-transform: rotate(144deg);
                -moz-transform: rotate(144deg);
                -ms-transform: rotate(144deg);
                -o-transform: rotate(144deg);
                transform: rotate(144deg);
                -webkit-border-radius: 9px;
                -moz-border-radius: 9px;
                border-radius: 9px;
            }
            40% {
                -webkit-transform: rotate(180deg);
                -moz-transform: rotate(180deg);
                -ms-transform: rotate(180deg);
                -o-transform: rotate(180deg);
                transform: rotate(180deg);
                -webkit-border-radius: 12px;
                -moz-border-radius: 12px;
                border-radius: 12px;
            }
            50% {
                -webkit-transform: rotate(216deg);
                -moz-transform: rotate(216deg);
                -ms-transform: rotate(216deg);
                -o-transform: rotate(216deg);
                transform: rotate(216deg);
                -webkit-border-radius: 14px;
                -moz-border-radius: 14px;
                border-radius: 14px;
            }
            60% {
                -webkit-transform: rotate(252deg);
                -moz-transform: rotate(252deg);
                -ms-transform: rotate(252deg);
                -o-transform: rotate(252deg);
                transform: rotate(252deg);
                -webkit-border-radius: 16px;
                -moz-border-radius: 16px;
                border-radius: 16px;
            }
            70% {
                -webkit-transform: rotate(288deg);
                -moz-transform: rotate(288deg);
                -ms-transform: rotate(288deg);
                -o-transform: rotate(288deg);
                transform: rotate(288deg);
                -webkit-border-radius: 19px;
                -moz-border-radius: 19px;
                border-radius: 19px;
            }
            80% {

                -webkit-transform: rotate(324deg);
                -moz-transform: rotate(324deg);
                -ms-transform: rotate(324deg);
                -o-transform: rotate(324deg);
                transform: rotate(324deg);
                -webkit-border-radius: 22px;
                -moz-border-radius: 22px;
                border-radius: 22px;
            }
            to {
                -webkit-transform: rotate(360deg);
                -moz-transform: rotate(360deg);
                -ms-transform: rotate(360deg);
                -o-transform: rotate(360deg);
                transform: rotate(360deg);
                -webkit-border-radius: 25px;
                -moz-border-radius: 25px;
                border-radius: 25px;
            }
        }

        /*给方型box一个初步样式*/
        a.box {
            display: block;
            width: 50px;
            height: 50px;
            background: red;
            margin-bottom: 20px;
            -webkit-border-radius: 25px;
            -moz-border-radius: 25px;
            border-radius: 25px;
            background: green;
        }

        /*圆型box的样式，并在这里应用animation*/
        a.round {
            /*-webkit-border-radius: 25px;
            -moz-border-radius: 25px;
            border-radius: 25px;
            background: green;*/
            -webkit-animation-name: round;
            -moz-animation-name: round;
            -o-animation-name: round;
            animation-name: round;
            -webkit-animation-duration: 6s;
            -moz-animation-duration: 6s;
            -o-animation-duration: 6s;
            animation-duration: 6s;
            -webkit-animation-timing-function: linear;
            -moz-animation-timing-function: linear;
            -o-animation-timing-function: linear;
            animation-timing-function: linear;
            /*-webkit-animation-iteration-count: infinite;/!*动画播放次涒为无限次*!/
            -moz-animation-iteration-count: infinite;
            -o-animation-iteration-count: infinite;
            animation-iteration-count: infinite;*/
            -webkit-animation-direction: alternate;
            -moz-animation-direction: alternate;
            -o-animation-direction: alternate;
            animation-direction: alternate;
        }

        /*click button效果*/
        .click-btn {
            background: rgba(125, 220, 80, 0.8);
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border-radius: 5px;
            -webkit-box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.8), 0 0 10px rgba(10, 255, 120, 0.3);
            -moz-box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.8), 0 0 10px rgba(10, 255, 120, 0.3);
            box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.8), 0 0 10px rgba(10, 255, 120, 0.3);
            padding: 5px 10px;
            color: #369;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.5);
            cursor: pointer;
        }
    </style>
</head>
<body>
<a href="#" class="box"></a>
<span class="click-btn">Click3</span>
<script src="../../js/jquery-1.10.2.min.js"></script>
<script>
    /*document.querySelector(".click-btn").onclick= function () {
     var obj=document.querySelector(".box"),cls="round";
     if(hasClass(obj,cls)){
     removeClass(obj, cls);
     setTimeout(function () {
     $(obj).addClass("round");
     },10);
     }else{
     addClass(obj, cls);
     }
     }*/

    $(function () {
        rotate.init();
    });
    var rotate = function () {
        var ob = {
            trigger: $(".click-btn"),
            target: $(".box")
        }

        function _init() {
            ob.trigger.on("click", function () {
                if (ob.target.hasClass("round")) {
                    ob.target.removeClass("round");
                    setTimeout(function () {
                        ob.target.addClass("round")
                    },10);
                }else{
                    ob.target.addClass("round")
                }
            });
        }

        return {
            init: _init
        }
    }();

    function hasClass(obj, cls) {
        return obj.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
    }
    function addClass(obj, cls) {
        if (!this.hasClass(obj, cls)) obj.className += " " + cls;
    }
    function removeClass(obj, cls) {
        if (hasClass(obj, cls)) {
            var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
            obj.className = obj.className.replace(reg, ' ');
        }
    }
    function toggleClass(obj, cls) {
        if (hasClass(obj, cls)) {
            removeClass(obj, cls);
        } else {
            addClass(obj, cls);
        }
    }
</script>
</body>
</html>